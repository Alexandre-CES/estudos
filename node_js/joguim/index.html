<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div id="showCliques-box"><span id="showCliques"></span></div>
        <div id="cooldownUpgrade"><button onclick="reduceCooldown()">cooldown</button></div>
    </header>
    <main class="center-box-transform">
        <button onclick="clicou()" id="main-button">Click</button>
        
    </main>
</body>
<audio id="catSound" src="./mixkit-arcade-game-jump-coin-216.wav"></audio>
<script>

    var sas = 0

    var mainButton = document.querySelector('#main-button')
    var showCliques = document.querySelector('#showCliques')
    var cooldownUpgrade = document.querySelector('#cooldownUpgrade')

    var cliques = 0

    var iscooldown = false
    var cooldown = 1000

    var catSound = document.querySelector('#catSound')

    const wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
    
    function clicou(){
        if (iscooldown == false){
            iscooldown = true
            cliques += 1
            updateCliques()
            cliqueResize()
            catSound.currentTime = 0
            catSound.play()
            fcooldown()
        }
    }

    function reduceCooldown(){
        if(cooldown <= 100){
            cooldownUpgrade.style.visibility = 'hidden'
            return
        }
        if(cliques >= 1){
            cliques -= 1
            cooldown -= 100
            updateCliques()
        }
    }

    async function fcooldown(){
        await wait(cooldown)
        iscooldown = false
    }

    async function cliqueResize(){
        mainButton.style.width =  '100px'
        mainButton.style.height = '100px'

        await wait(100)
        
        mainButton.style.width = '80px'
        mainButton.style.height = '80px'
    }

    function updateCliques(){
        showCliques.innerHTML = cliques
    }
        


</script>
</html>